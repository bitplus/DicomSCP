<div class="modal-content">
    <div class="modal-header">
        <h5 class="modal-title">配置说明</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
    </div>
    <div class="modal-body">
        <div class="accordion" id="configHelp">
            <!-- DICOM 基础配置 -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#dicomSettingsHelp">
                        STORESCP配置 (DicomSettings)
                    </button>
                </h2>
                <div id="dicomSettingsHelp" class="accordion-collapse collapse">
                    <div class="accordion-body">
                        <dl>
                            <dt>AeTitle</dt>
                            <dd>DICOM 应用实体标题，1-16个字符，只能包含字母、数字、下划线和横线。例如：STORESCP</dd>
                            
                            <dt>StoreSCPPort</dt>
                            <dd>存储服务端口号，范围1-65535。建议使用11112等标准端口</dd>
                            
                            <dt>StoragePath</dt>
                            <dd>DICOM文件存储路径。使用正斜杠(/)或双反斜杠(\\)，例如：
                                <ul>
                                    <li>正斜杠格式：D:/dicom/storage</li>
                                    <li>反斜杠格式：D:\\dicom\\storage</li>
                                </ul>
                            </dd>
                            
                            <dt>TempPath</dt>
                            <dd>临时文件存储路径。使用正斜杠(/)或双反斜杠(\\)，例如：
                                <ul>
                                    <li>相对路径：./temp_files</li>
                                    <li>绝对路径：D:/dicom/temp 或 D:\\dicom\\temp</li>
                                </ul>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>

            <!-- 高级配置 -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#advancedHelp">
                        STORESCP高级配置 (Advanced)
                    </button>
                </h2>
                <div id="advancedHelp" class="accordion-collapse collapse">
                    <div class="accordion-body">
                        <dl>
                            <dt>ValidateCallingAE</dt>
                            <dd>是否验证调用方AE Title，启用后只允许指定的AE Title连接。默认：false</dd>
                            
                            <dt>AllowedCallingAEs</dt>
                            <dd>允许的调用方AE Title列表，当ValidateCallingAE为true时生效。例如：["WORKSTATION1", "PACS1"]</dd>
                            
                            <dt>ConcurrentStoreLimit</dt>
                            <dd>并发存储限制，0表示不限制。建议值：根据服务器性能设置，如4或8</dd>
                            
                            <dt>EnableCompression</dt>
                            <dd>是否启用压缩，影响存储和传输性能。默认：false</dd>
                            
                            <dt>PreferredTransferSyntax</dt>
                            <dd>首选传输语法，当接收到压缩格式的图像时，可以选择转换为以下格式存储：
                                <ul>
                                    <li>ImplicitVRLittleEndian - 隐式小端（1.2.840.10008.1.2）</li>
                                    <li>ExplicitVRLittleEndian - 显式小端（1.2.840.10008.1.2.1）</li>
                                    <li>ExplicitVRBigEndian - 显式大端（1.2.840.10008.1.2.2）</li>
                                    <li>JPEG2000Lossless - JPEG2000无损压缩（1.2.840.10008.1.2.4.90）</li>
                                    <li>JPEGLSLossless - JPEG-LS无损压缩（1.2.840.10008.1.2.4.80）</li>
                                    <li>RLELossless - RLE无损压缩（1.2.840.10008.1.2.5）</li>
                                    <li>JPEG2000Lossy - JPEG2000有损压缩（1.2.840.10008.1.2.4.91）</li>
                                    <li>JPEGProcess14 - JPEG无损压缩（1.2.840.10008.1.2.4.70）</li>
                                </ul>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>

            <!-- WorklistSCP配置 -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#worklistHelp">
                        Worklist配置 (WorklistSCP)
                    </button>
                </h2>
                <div id="worklistHelp" class="accordion-collapse collapse">
                    <div class="accordion-body">
                        <dl>
                            <dt>AeTitle</dt>
                            <dd>Worklist服务的AE Title。例如：WORKLISTSCP</dd>
                            
                            <dt>Port</dt>
                            <dd>Worklist服务端口号，范围1-65535。建议：11113</dd>
                            
                            <dt>ValidateCallingAE</dt>
                            <dd>是否验证调用方AE Title。默认：false</dd>
                            
                            <dt>AllowedCallingAEs</dt>
                            <dd>允许的调用方AE Title列表。例如：["MODALITY1", "MODALITY2"]</dd>
                        </dl>
                    </div>
                </div>
            </div>

            <!-- QRSCP配置说明 -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#qrscpHelp">
                        查询检索服务配置 (QRSCP)
                    </button>
                </h2>
                <div id="qrscpHelp" class="accordion-collapse collapse">
                    <div class="accordion-body">
                        <dl>
                            <dt>AeTitle</dt>
                            <dd>查询检索服务的AE Title。例如：QRSCP</dd>
                            
                            <dt>Port</dt>
                            <dd>查询检索服务端口号。建议：11114</dd>
                            
                            <dt>ValidateCallingAE</dt>
                            <dd>是否验证调用方AE Title。默认：false</dd>
                            
                            <dt>AllowedCallingAEs</dt>
                            <dd>允许的调用方AE Title列表</dd>
                            
                            <dt>MoveDestinations</dt>
                            <dd>C-MOVE目标节点配置列表，每个节点包含：
                                <ul>
                                    <li>Name - 节点名称</li>
                                    <li>AeTitle - 节点AE Title</li>
                                    <li>HostName - 主机名或IP地址</li>
                                    <li>Port - 端口号</li>
                                    <li>IsDefault - 是否为默认节点</li>
                                </ul>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>

            <!-- 查询检索客户端配置 -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#qrscuHelp">
                        查询检索客户端配置 (QueryRetrieveConfig)
                    </button>
                </h2>
                <div id="qrscuHelp" class="accordion-collapse collapse">
                    <div class="accordion-body">
                        <dl>
                            <dt>LocalAeTitle</dt>
                            <dd>本地AE Title，STORESCU共用这个AE。例如：QRSCU</dd>
                            
                            <dt>LocalPort</dt>
                            <dd>本地端口号，用于C-GET操作接收图像。建议：11116</dd>
                            
                            <dt>RemoteNodes</dt>
                            <dd>远程节点配置列表，每个节点包含：
                                <ul>
                                    <li>Name - 节点名称</li>
                                    <li>AeTitle - 节点AE Title</li>
                                    <li>HostName - 主机名或IP地址</li>
                                    <li>Port - 端口号</li>
                                    <li>IsDefault - 是否为默认节点</li>
                                </ul>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>

            <!-- 打印服务配置 -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#printscpHelp">
                        打印服务配置 (PrintSCP)
                    </button>
                </h2>
                <div id="printscpHelp" class="accordion-collapse collapse">
                    <div class="accordion-body">
                        <dl>
                            <dt>AeTitle</dt>
                            <dd>打印服务的AE Title。例如：PRINTSCP</dd>
                            
                            <dt>Port</dt>
                            <dd>打印服务端口号。建议：11115</dd>
                            
                            <dt>ValidateCallingAE</dt>
                            <dd>是否验证调用方AE Title。默认：false</dd>
                            
                            <dt>AllowedCallingAEs</dt>
                            <dd>允许的调用方AE Title列表</dd>
                        </dl>
                    </div>
                </div>
            </div>

            <!-- 打印客户端配置 -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#printscuHelp">
                        打印客户端配置 (PrintSCU)
                    </button>
                </h2>
                <div id="printscuHelp" class="accordion-collapse collapse">
                    <div class="accordion-body">
                        <dl>
                            <dt>AeTitle</dt>
                            <dd>打印客户端的AE Title。例如：PRINTSCU</dd>
                            
                            <dt>Printers</dt>
                            <dd>打印机列表配置，每个打印机包含：
                                <ul>
                                    <li>Name - 打印机名称</li>
                                    <li>AeTitle - 打印机AE Title</li>
                                    <li>HostName - 打印机主机名或IP地址</li>
                                    <li>Port - 打印机端口号</li>
                                    <li>IsDefault - 是否为默认打印机</li>
                                    <li>Description - 打印机描述</li>
                                </ul>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>

            <!-- 日志配置 -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#loggingHelp">
                        日志配置 (Logging)
                    </button>
                </h2>
                <div id="loggingHelp" class="accordion-collapse collapse">
                    <div class="accordion-body">
                        <dl>
                            <dt>LogPath</dt>
                            <dd>日志根目录。例如logs</dd>
                            
                            <dt>RetainedDays</dt>
                            <dd>日志保留天数。默认：31</dd>
                            
                            <dt>OutputTemplate</dt>
                            <dd>日志输出模板。默认：[{Timestamp:yyyy-MM-dd HH:mm:ss.fff} {Level:u3}] {Message:lj}{NewLine}{Exception}</dd>
                            
                            <dt>Services</dt>
                            <dd>各服务的日志配置，包含：
                                <ul>
                                    <li>Enabled - 是否启用</li>
                                    <li>MinimumLevel - 最低日志级别：
                                        <ul>
                                            <li>Verbose - 最详细的日志</li>
                                            <li>Debug - 调试信息</li>
                                            <li>Information - 一般信息</li>
                                            <li>Warning - 警告信息</li>
                                            <li>Error - 错误信息</li>
                                            <li>Fatal - 致命错误</li>
                                        </ul>
                                    </li>
                                    <li>EnableConsoleLog - 是否输出到控制台</li>
                                    <li>EnableFileLog - 是否输出到文件</li>
                                    <li>LogPath - 日志文件路径</li>
                                    <li>OutputTemplate - 输出模板</li>
                                </ul>
                                <p>日志级别说明：</p>
                                <ul>
                                    <li>Verbose：最详细的调试信息，包含所有操作细节</li>
                                    <li>Debug：调试信息，用于开发和故障排查</li>
                                    <li>Information：一般信息，记录正常的操作流程</li>
                                    <li>Warning：警告信息，表示可能的问题但不影响系统运行</li>
                                    <li>Error：错误信息，表示发生了需要处理的错误</li>
                                    <li>Fatal：致命错误，表示系统无法继续运行的严重问题</li>
                                </ul>
                                <p>注意：设置某个级别后，将记录该级别及更高级别的日志。例如，设置为 Information 将记录 Information、Warning、Error 和 Fatal 级别的日志。</p>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>

            <!-- 其他配置 -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#otherHelp">
                        其他配置
                    </button>
                </h2>
                <div id="otherHelp" class="accordion-collapse collapse">
                    <div class="accordion-body">
                        <dl>
                            <dt>Swagger</dt>
                            <dd>API文档配置：
                                <ul>
                                    <li>Enabled - 是否启用</li>
                                    <li>Title - 文档标题</li>
                                    <li>Version - 版本号</li>
                                    <li>Description - 描述</li>
                                </ul>
                            </dd>
                            
                            <dt>ConnectionStrings</dt>
                            <dd>数据库连接字符串配置：
                                <ul>
                                    <li>DicomDb - SQLite数据库文件路径</li>
                                </ul>
                            </dd>
                            
                            <dt>Kestrel</dt>
                            <dd>Web服务器配置：
                                <ul>
                                    <li>Endpoints.Http.Url - 监听地址和端口</li>
                                </ul>
                            </dd>
                        </dl>
                    </div>
                </div>
            </div>

            <!-- 在其他配置后面添加新的配置项说明 -->
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#kestrelHelp">
                        Kestrel服务器配置 (Kestrel)
                    </button>
                </h2>
                <div id="kestrelHelp" class="accordion-collapse collapse">
                    <div class="accordion-body">
                        <dl>
                            <dt>Endpoints.Http.Url</dt>
                            <dd>HTTP监听地址和端口。如：http://0.0.0.0:5000</dd>

                            <dt>Limits.MaxConcurrentConnections</dt>
                            <dd>最大并发连接数，用于控制同时处理的最大连接数。默认：100</dd>

                            <dt>Limits.MaxConcurrentUpgradedConnections</dt>
                            <dd>最大并发升级连接数（如WebSocket）。默认：100</dd>

                            <dt>Limits.KeepAliveTimeout</dt>
                            <dd>保持连接超时时间，超过此时间的空闲连接将被关闭。格式：00:02:00（2分钟）</dd>

                            <dt>Limits.RequestHeadersTimeout</dt>
                            <dd>请求头超时时间，接收请求头的最大等待时间。格式：00:01:00（1分钟）</dd>

                            <dt>Limits.MaxRequestBodySize</dt>
                            <dd>最大请求体大小，用于限制上传文件大小。默认：52428800（50MB）</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
